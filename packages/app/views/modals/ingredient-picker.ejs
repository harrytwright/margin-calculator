<!-- Ingredient Picker Modal -->
<div class="modal-header bg-gray-50 px-6 py-4 border-b border-gray-200 rounded-t-lg">
  <div class="flex items-center justify-between">
    <h3 class="text-lg font-semibold text-gray-900">
      Add Ingredient to <%= recipe.name %>
    </h3>
    <button
      onclick="closeModal()"
      class="text-gray-400 hover:text-gray-600 transition-colors"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
</div>

<form
  hx-post="/api/recipes/<%= recipe.slug %>/ingredients"
  hx-target="#recipes-editor"
  hx-swap="innerHTML"
  class="flex-1 overflow-y-auto"
>
  <div class="px-6 py-4 space-y-4">
    <!-- Ingredient Selection -->
    <div>
      <label for="ingredientSlug" class="block text-sm font-medium text-gray-700 mb-1">
        Select Ingredient <span class="text-red-500">*</span>
      </label>
      <select
        id="ingredientSlug"
        name="ingredientSlug"
        required
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        <option value="">Choose an ingredient...</option>
        <% ingredients.forEach(ing => { %>
        <option value="<%= ing.slug %>"><%= ing.name %> (<%= ing.purchaseUnit %>)</option>
        <% }) %>
      </select>
    </div>

    <!-- Quantity -->
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label for="quantity" class="block text-sm font-medium text-gray-700 mb-1">
          Quantity <span class="text-red-500">*</span>
        </label>
        <input
          type="number"
          id="quantity"
          name="quantity"
          required
          min="0"
          step="0.01"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="e.g., 100"
        />
      </div>

      <div>
        <label for="unit" class="block text-sm font-medium text-gray-700 mb-1">
          Unit <span class="text-red-500">*</span>
        </label>
        <input
          type="text"
          id="unit"
          name="unit"
          required
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="e.g., g, ml, each"
        />
      </div>
    </div>

    <!-- Create New Link -->
    <div class="text-center pt-2 border-t border-gray-200">
      <p class="text-sm text-gray-500 mb-2">Can't find what you're looking for?</p>
      <button
        type="button"
        hx-get="/ingredients/new"
        hx-target=".modal-content"
        class="text-sm text-blue-600 hover:underline"
      >
        + Create New Ingredient
      </button>
    </div>
  </div>

  <!-- Modal Footer -->
  <div class="modal-footer bg-gray-50 px-6 py-4 border-t border-gray-200 rounded-b-lg flex justify-end gap-3">
    <button
      type="button"
      onclick="closeModal()"
      class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"
    >
      Cancel
    </button>
    <button
      type="submit"
      class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700"
    >
      Add to Recipe
    </button>
  </div>
</form>
